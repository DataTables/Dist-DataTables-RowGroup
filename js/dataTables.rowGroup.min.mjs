/*! RowGroup 1.6.0
 * Â© SpryMedia Ltd - datatables.net/license
 */
import jQuery from"jquery";import DataTable from"datatables.net";let $=jQuery;var RowGroup=function(t,r){if(!DataTable.versionCheck||!DataTable.versionCheck("2"))throw new Error("RowGroup requires DataTables 2 or newer");this.c=$.extend(!0,{},DataTable.defaults.rowGroup,RowGroup.defaults,r),this.s={dt:new DataTable.Api(t)},this.dom={};r=this.s.dt.settings()[0],t=r.rowGroup;if(t)return t;(r.rowGroup=this)._constructor()};$.extend(RowGroup.prototype,{dataSrc:function(t){var r;return void 0===t?this.c.dataSrc:(r=this.s.dt,this.c.dataSrc=t,$(r.table().node()).triggerHandler("rowgroup-datasrc.dt",[r,t]),this)},disable:function(){return this.c.enable=!1,this},enable:function(t){return!1===t?this.disable():(this.c.enable=!0,this)},enabled:function(){return this.c.enable},_constructor:function(){var e=this,t=this.s.dt,a=t.settings()[0],o=$("div.dt-scroll-body",t.table().container()),n=(t.on("draw.dtrg",function(t,r){e.c.enable&&a===r&&(e._draw(),n)&&o.scrollTop()&&(o.scrollTop(n),n=null)}),t.on("column-visibility.dt.dtrg responsive-resize.dt.dtrg",function(){e._adjustColspan()}),t.on("destroy",function(){t.off(".dtrg")}),null);o.length&&t.on("preDraw",function(){n=o.scrollTop()})},_adjustColspan:function(){var t=$("tr."+this.c.className,this.s.dt.table().body()).find("th:visible, td:visible");1===t.length&&t.attr("colspan",this._colspan())},_colspan:function(){return this.s.dt.columns().visible().reduce(function(t,r){return t+r},0)},_draw:function(){var t=this.s.dt;null===this.c.dataSrc||Array.isArray(this.c.dataSrc)&&0===this.c.dataSrc.length||(t=this._group(0,t.rows({page:"current"}).indexes()),this._groupDisplay(0,t))},_group:function(t,r){for(var e,a=Array.isArray(this.c.dataSrc)?this.c.dataSrc:[this.c.dataSrc],o=DataTable.util.get(a[t]),n=this.s.dt,s=[],i=0,l=r.length;i<l;i++){var u,d=r[i];null==(u=o(n.row(d).data(),t))&&(u=this.c.emptyDataGroup),void 0!==e&&u===e||(s.push({dataPoint:u,rows:[]}),e=u),s[s.length-1].rows.push(d)}if(void 0!==a[t+1])for(i=0,l=s.length;i<l;i++)s[i].children=this._group(t+1,s[i].rows);return s},_groupDisplay:function(t,r){for(var e,a=this.s.dt,o=0,n=r.length;o<n;o++){var s,i=r[o],l=i.dataPoint,u=i.rows;this.c.startRender&&(e=this.c.startRender.call(this,a.rows(u),l,t),s=this._rowWrap(e,this.c.startClassName,t))&&s.insertBefore(a.row(u[0]).node()),this.c.endRender&&(e=this.c.endRender.call(this,a.rows(u),l,t),s=this._rowWrap(e,this.c.endClassName,t))&&s.insertAfter(a.row(u[u.length-1]).node()),i.children&&this._groupDisplay(t+1,i.children)}},_rowWrap:function(t,r,e){return null==(t=null!==t&&""!==t?t:this.c.emptyDataGroup)?null:("object"==typeof t&&t.nodeName&&"tr"===t.nodeName.toLowerCase()?$(t):t instanceof $&&t.length&&"tr"===t[0].nodeName.toLowerCase()?t:$("<tr/>").append($("<th/>").attr("colspan",this._colspan()).attr("scope","row").append(t))).addClass(this.c.className).addClass(r).addClass("dtrg-level-"+e)}}),RowGroup.defaults={className:"dtrg-group",dataSrc:0,emptyDataGroup:"No group",enable:!0,endClassName:"dtrg-end",endRender:null,startClassName:"dtrg-start",startRender:function(t,r){return r}},RowGroup.version="1.6.0",$.fn.dataTable.RowGroup=RowGroup,$.fn.DataTable.RowGroup=RowGroup,DataTable.Api.register("rowGroup()",function(){return this}),DataTable.Api.register("rowGroup().disable()",function(){return this.iterator("table",function(t){t.rowGroup&&t.rowGroup.enable(!1)})}),DataTable.Api.register("rowGroup().enable()",function(r){return this.iterator("table",function(t){t.rowGroup&&t.rowGroup.enable(void 0===r||r)})}),DataTable.Api.register("rowGroup().enabled()",function(){var t=this.context;return!(!t.length||!t[0].rowGroup)&&t[0].rowGroup.enabled()}),DataTable.Api.register("rowGroup().dataSrc()",function(r){var t;return void 0===r?(t=this.context[0].rowGroup)?t.dataSrc():[]:this.iterator("table",function(t){t.rowGroup||new RowGroup(this.context[0]),t.rowGroup.dataSrc(r)})}),$(document).on("preInit.dt.dtrg",function(t,r,e){var a,o;"dt"===t.namespace&&(t=r.oInit.rowGroup,a=DataTable.defaults.rowGroup,t||a)&&(o=$.extend({},a,t),!1!==t)&&new RowGroup(r,o)});export default DataTable;